import { MailerService } from '@nestjs-modules/mailer'
import { Injectable } from '@nestjs/common'
import { ConfigService } from '@nestjs/config'

@Injectable()
export class EmailService {
	constructor(
		private readonly mailerService: MailerService,
		private readonly configService: ConfigService
	) {}

	/**
	 * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
	 * @param to - –ê–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è –ø–∏—Å—å–º–∞.
	 * @param subject - –¢–µ–º–∞ –ø–∏—Å—å–º–∞.
	 * @param html - HTML —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∏—Å—å–º–∞.
	 * @returns Promise —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞.
	 */
	sendEmail(to: string, subject: string, html: string) {
		return this.mailerService.sendMail({
			to,
			subject,
			html
		})
	}

	/**
	 * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
	 * @param to - –ê–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∏—Å—å–º–∞.
	 * @returns Promise —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞.
	 */
	sendWelcome(to: string, name: string) {
		return this.sendEmail(
			to,
			'–£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
			`<div style="font-family: Arial, sans-serif; padding: 10px 80px; font-size: 14px; color: #000000">
      <h2>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã</h2>
      <p>
        –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –≤–∞—Å –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ TeaCoder! üéâ<br /><br />
        –í—ã —Å–¥–µ–ª–∞–ª–∏ –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ –Ω–æ–≤—ã–º –∑–Ω–∞–Ω–∏—è–º –∏ –Ω–∞–≤—ã–∫–∞–º –≤ —Å—Ñ–µ—Ä–µ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. üöÄ
      </p>
      <hr />
      <p>
        –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–≤–µ—Ç–æ–≤, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –æ—Ç–¥–∞—á—É –æ—Ç
        –æ–±—É—á–µ–Ω–∏—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ TeaCoder:
      </p>
      <div>
        <h3>–°–æ–≤–µ—Ç ‚Ññ1: –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å, –ø—Ä–æ—Ö–æ–¥—è –∫—É—Ä—Å—ã üìà</h3>
        <p style="line-height: 150%">
          –ö—É—Ä—Å—ã –Ω–∞ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –≥–ª–∞–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å
          –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ. –ó–∞ –∫–∞–∂–¥—É—é –ø—Ä–æ–π–¥–µ–Ω–Ω—É—é –≥–ª–∞–≤—É –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –æ—á–∫–∏,
          –æ—Ç—Ä–∞–∂–∞—é—â–∏–µ –≤–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –æ–±—É—á–µ–Ω–∏–∏. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏
          –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–Ω—ã–º –Ω–∞ –≤–∞—à–∏—Ö
          —Ü–µ–ª—è—Ö. üí™
        </p>
        <img
          src="${this.configService.get('APP_URL')}/uploads/email/email-1.png"
          width="28%"
          style="border-radius: 10px"
        />
      </div>
      <hr style="margin: 20px 0px" />
      <div>
        <h3>–°–æ–≤–µ—Ç ‚Ññ2: –°–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –ª–∏–¥–µ—Ä–æ–≤ üèÜ</h3>
        <p style="line-height: 150%">
          –í —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–∞–º—ã–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.
          –í—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å, –∫—Ç–æ –∏–∑ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –¥–æ—Å—Ç–∏–≥ –Ω–∞–∏–±–æ–ª—å—à–∏—Ö —É—Å–ø–µ—Ö–æ–≤ –∏ –Ω–∞–±—Ä–∞–ª
          –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –æ—á–∫–æ–≤ –∑–∞ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –≥–ª–∞–≤—ã –∫—É—Ä—Å–æ–≤. –°–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –∏
          —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∑–∞–Ω—è—Ç—å –æ–¥–Ω–æ –∏–∑ –ø–µ—Ä–≤—ã—Ö –º–µ—Å—Ç! üéØ
        </p>
        <img
          src="${this.configService.get('APP_URL')}/uploads/email/email-2.png"
          width="32%"
          style="border-radius: 10px"
        />
      </div>
      <hr style="margin: 20px 0px" />
      <div>
        <p style="line-height: 150%">
          –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –Ω–∞–º. –ú—ã –≤—Å–µ–≥–¥–∞
          –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å –≤–∞–º –Ω–∞ –≤–∞—à–µ–º –ø—É—Ç–∏ –∫ –æ–±—É—á–µ–Ω–∏—é! ü§ó
        </p>
        <a
          href="${this.configService.get('APP_ORIGIN')}/?utm_source=email&utm_medium=email&utm_campaign=help@teacoder.ru&utm_content=email_content"
          style="
            display: inline-block;
            background-color: #0284c7;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            margin-top: 10px;
          "
        >
          –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ TeaCoder
        </a>
        <p
          style="margin-top: 35px; font-size: 12px; color: #777; text-align: center"
        >
          ¬© 2024 TeaCoder. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
        </p>
      </div>
    </div>`
		)
	}
}
